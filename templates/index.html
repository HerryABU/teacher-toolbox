<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™å¸ˆå·¥å…·ç®± - ä¸€ç«™å¼æ•™å¸ˆæ—¥å¸¸ç®¡ç†å·¥å…·åˆé›†</title>

    <!-- CSSèµ„æº -->
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/css/element-plus.index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='src/css/app.css') }}">
    <style>
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 14px;
            background-color: #f8f8f8;
            border-top: 1px solid #eee;
            width: 100%;
            box-sizing: border-box;
            margin-top: 40px;
        }

        .copyright {
            margin: 0;
            line-height: 1.5;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
        <button class="mobile-menu-btn" @click="toggleSidebar">â˜°</button>

        <div class="app-container">
            <!-- ä¾§è¾¹æ  -->
            <div class="sidebar" :class="{ open: sidebarOpen }">
                <div class="sidebar-header">
                    <div class="sidebar-title">æ•™å¸ˆå·¥å…·ç®±</div>
                    <div class="sidebar-subtitle">ä¸€ç«™å¼æ•™å¸ˆæ—¥å¸¸ç®¡ç†å·¥å…·åˆé›†</div>
                </div>
                <div class="sidebar-menu">
                    {% raw %}
                    <a v-for="category in categories" :key="category.id" :href="'/tools/categories/' + category.id + '/'"
                        class="menu-item" :class="{ active: selectedCategory === category.id }"
                        @click="selectCategory(category)">
                        <div class="menu-icon">{{ getIcon(category.icon) }}</div>
                        <div>{{ category.name }}</div>
                    </a>
                    {% endraw %}
                </div>
            </div>

            <!-- ä¸»å†…å®¹åŒº -->
            <div class="main-content">
                <!-- å¿«é€Ÿå¼€å§‹ -->
                <div class="quick-start">
                    <h2>å¿«é€Ÿå¼€å§‹</h2>
                    <div class="quick-start-buttons">
                        <a href="#" class="quick-start-btn">
                            ğŸ“ ä¸Šä¼ ç­çº§åå•
                        </a>
                        <a href="#" class="quick-start-btn">
                            â• åˆ›å»ºæ–°ç­çº§
                        </a>
                    </div>
                </div>

                <!-- æ“ä½œæŒ‰é’® -->
                <div class="action-buttons">
                    <a href="/add.html" class="action-btn">â• æ·»åŠ é¡¹ç›®</a>
                    <a href="/del.html" class="action-btn">ğŸ—‘ï¸ åˆ é™¤é¡¹ç›®</a>
                </div>

                <!-- åŠ è½½çŠ¶æ€ -->
                <div v-if="loading" class="loading">
                    <p>æ­£åœ¨åŠ è½½å·¥å…·æ•°æ®...</p>
                </div>

                <div v-else-if="error" class="error">
                    <p>åŠ è½½å¤±è´¥ï¼š{{ error }}</p>
                </div>

                <!-- åˆ†ç±»å’Œå·¥å…·æ˜¾ç¤º -->
                <div v-else>
                    {% raw %}
                    <div v-for="category in categories" :key="category.id" class="categories-section">
                        <!-- åˆ†ç±»æ ‡é¢˜ï¼ˆå¯ç‚¹å‡»å±•å¼€/æŠ˜å ï¼‰ -->
                        <div class="section-header" @click="toggleCategory(category)">
                            <div class="section-title-container">
                                <div class="section-icon">{{ getIcon(category.icon) }}</div>
                                <div class="section-title">{{ category.name }}</div>
                            </div>
                            <button class="expand-btn" :class="{ expanded: category.expanded }">
                                â–¼
                            </button>
                        </div>

                        <!-- å·¥å…·ç½‘æ ¼ï¼ˆé»˜è®¤å±•å¼€ï¼‰ -->
                        <div v-show="category.expanded" class="tools-grid">
                            <div v-for="tool in category.tools" :key="tool.id" class="tool-card">
                                <div class="tool-header">
                                    <div class="tool-icon">{{ getIcon(tool.icon) }}</div>
                                    <div class="tool-title">{{ tool.name }}</div>
                                </div>
                                <div class="tool-description">
                                    {{ tool.description }}
                                </div>
                                <a :href="category.path + '/tools/' + tool.id + '/index.html'" class="tool-action">
                                    ä½¿ç”¨å·¥å…·
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endraw %}
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="copyright">
            &copy; å¼€æºæ•™å¸ˆå·¥å…·ç®±ï¼Œæ¬¢è¿ç¤¾åŒºæä¾›ã€‚
        </div>
    </footer>

    <!-- JSèµ„æº -->
    <script src="{{ url_for('static', filename='vendor/js/vue.global.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/pinia.iife.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/vue-router.global.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/element-plus.index.full.js') }}"></script>
    <script src="{{ url_for('static', filename='src/js/utils.js') }}"></script>
    <script>
        // åˆå§‹åŒ–æ•°æ®
        const app = Vue.createApp({
            data() {
                return {
                    categories: {{ categories | tojson }},
                    selectedCategory: null,
                    sidebarOpen: false,
                    loading: false,
                    error: null
                };
            },
            mounted() {
                // ä¸ºæ¯ä¸ªåˆ†ç±»è®¾ç½®åˆå§‹å±•å¼€çŠ¶æ€
                this.categories.forEach(category => {
                    category.expanded = true;
                });
            },
            methods: {
                toggleCategory(category) {
                    category.expanded = !category.expanded;
                },
                selectCategory(category) {
                    this.selectedCategory = category.id;
                    this.sidebarOpen = false;
                },
                toggleSidebar() {
                    this.sidebarOpen = !this.sidebarOpen;
                },
                getIcon(iconName) {
                    const icons = {
                        'DocumentAdd': 'ğŸ“„',
                        'ChatLineSquare': 'ğŸ’¬',
                        'EditPen': 'âœï¸',
                        'Calendar': 'ğŸ“…',
                        'Medal': 'ğŸ†',
                        'Notification': 'ğŸ””'
                    };
                    return icons[iconName] || 'ğŸ”§';
                }
            }
        });
        
        app.mount('#app');
    </script>
</body>

</html>